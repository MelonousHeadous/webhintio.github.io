"use strict";!function(){const t="webhint-activity",e=window.localStorage;let a=null,n=[],s=15e3,i={};const o=async()=>{a&&(clearTimeout(a),a=null);const t=JSON.stringify({product:"webhint-online-scanner",data:n});n=[];try{(async(t,e)=>await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:e}))("https://webhint-telemetry.azurewebsites.net/api/log",t).then((t=>{200!==t.status&&console.warn("Failed to send telemetry: ",status)}))}catch(t){console.warn("Failed to send telemetry: ",t)}},l=async(t,e)=>{await(async(t,e)=>{n.push({data:{name:e.name,properties:Object.assign(Object.assign({},i),e.properties)},type:`${t}Data`,time:(new Date).toISOString()}),s?a||(a=setTimeout(o,s)):await o()})("Event",{name:t,properties:e})},r=(t=>{const e=JSON.parse(t)||{last28Days:"".padEnd(28,"0"),lastUpdated:""},a=(()=>{const t=new Date(Date.now());return t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t.toISOString()})(),n=((t,e)=>e?(new Date(t).getTime()-new Date(e).getTime())/1e3/60/60/24:1)(a,e.lastUpdated);return n<1?null:(e.last28Days="1".padEnd(Math.min(n,28),"0")+e.last28Days.slice(0,-n),e.lastUpdated=a,e)})(e.getItem(t));r&&(e.setItem(t,JSON.stringify(r)),l("online-activity",r))}();