!function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null});var e=window.getMessage,t=document.getElementById("categories-list"),n=document.getElementById("show-categories"),r=document.querySelector(".header"),o=window.matchMedia("(min-width: 48em)"),s=function(t,n){var r=void 0!==n?n:function(e){var t=e.closest(".rule-result");return Array.prototype.slice.apply(t.querySelectorAll(".rule-result--details")).some((function(e){return null!==e.getAttribute("open")}))}(t);r?(t.textContent=e("closeAll"),t.classList.remove("closed"),t.classList.add("expanded")):(t.textContent=e("expandAll"),t.classList.remove("expanded"),t.classList.add("closed"))},a=function(e,t){var n,r=void 0!==t?t:"true"===e.getAttribute("aria-expanded"),o=e.id;r?((n=e).setAttribute("aria-expanded","false"),n.removeAttribute("open"),e.setAttribute("title","show "+o+"'s result details")):(!function(e){e.setAttribute("aria-expanded","true"),e.setAttribute("open","")}(e),e.setAttribute("title","close "+o+"'s result details"))},i=function(){return r?"calc(100% - 5rem - "+r.clientHeight+"px)":"calc(100% - 5rem)"},l=function(){var e=n.closest(".module--categories").querySelector(".rule-categories");e.classList.contains("open")?(n.textContent="Jump to category",e.setAttribute("aria-expanded","false"),e.classList.remove("open"),document.body.classList.remove("menu-open")):(t.style.height=i(),n.textContent="Hide categories",e.setAttribute("aria-expanded","true"),e.classList.add("open"),document.body.classList.add("menu-open"))},u=function(e){setTimeout((function(){window.scrollTo(0,e.offsetTop-50)}),0)},c=["rule-tile--wrapper","rule-tile","rule-icon","rule-tile__category","rule-tile__sub-category","rule-tile__passed","rule-tile__info","rule-tile__results"],d=function(e){var t=e.target;return t.classList.contains("hint-link")?function(e){var t=e.getAttribute("href").substr(1);if(0!==t.indexOf("category")){var n=document.getElementById(t);u(n)}}(t):t.classList.contains("button-expand-all")?function(e){for(var t=e.closest(".rule-result"),n=Array.prototype.slice.apply(t.querySelectorAll(".rule-result--details")),r=e.classList.contains("expanded"),o=0;o<n.length;o++)a(n[o],!!r);s(e,!r)}(t):t.classList.contains("rule-title")?function(e){var t=e.closest(".rule-result").querySelector(".button-expand-all");setTimeout((function(){s(t)}),0)}(t):t.classList.contains("show-categories")?l():(o.matches||c.some((function(e){return!!t.classList.contains(e)&&(l(),!0)})),!0)},m=Array.prototype.slice.apply(document.querySelectorAll(".permalink-copy")),p=function(e){var t=e.currentTarget.parentElement;!function(e){var t="hidden-clipboard",n=document.getElementById(t);if(!n){var r=document.createElement("textarea");r.id=t,r.style.position="fixed",r.style.top="-10px",r.style.left="-10px",r.style.width="1px",r.style.height="1px",r.style.padding=0,r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",document.querySelector("body").appendChild(r),n=document.getElementById(t)}n.value=e,n.select(),document.execCommand("copy")}(t.querySelector(".permalink-content").textContent.trim()),function(e){var t=e.querySelector(".permalink-copy"),n=t.querySelector("img");window.ejsPartials?(t.removeChild(n),t.innerHTML+=ejsPartials["check-mark"]()):n.src="/static/images/scan/results-passed-icon-d12f41eeb3.svg"}(t)};m.forEach((function(e){e.addEventListener("click",p)})),window.addEventListener("popstate",(function(){var e,t;e="/scanner/",(t=window.location.href).length-e.length===t.indexOf(e)&&(window.location.href=window.location.href)}),!1);var f,y,h,g=function(){if(o.matches)t.removeAttribute("aria-expanded"),document.body.classList.remove("menu-open");else{var e=t.classList.contains("open");t.setAttribute("aria-expanded",e?"true":"false"),e&&(t.style.height=i(),document.body.classList.add("menu-open"))}},v=function(e){return e<10?"0"+e:e};!function(){var e=document.getElementById("scan-date");if(e){var t=e.getAttribute("data-date");if(t){var n=new Date(t);e.textContent=n.getFullYear()+"-"+v(n.getMonth()+1)+"-"+v(n.getDate())+" "+v(n.getHours())+":"+v(n.getMinutes())}}}(),t&&(y=Array.prototype.slice.apply(document.querySelectorAll("details[open]")),h=Array.prototype.slice.apply(document.querySelectorAll(".button-expand-all")),y.forEach((function(e){e.removeAttribute("open"),e.setAttribute("aria-expanded","false")})),h.forEach((function(t){t.textContent=e("expandAll"),t.classList.add("closed"),t.classList.remove("expanded")})),function(){var e=location.hash;if(e){var t=e.substr(1);if(0!==t.indexOf("category")){var n=document.getElementById(t),r=n.closest(".rule-result--details");r.setAttribute("open","open"),r.setAttribute("aria-expanded","true"),u(n)}}}(),(f=document.getElementById("results-container"))&&f.addEventListener("click",d,!1),g(),o.addListener(g),function(){for(var e=document.querySelectorAll("code"),t=0;t<e.length;t++)hljs.highlightBlock(e[t])}())}(),function(){var e=document.querySelector(".scan-overview");if(e){var t,n=e.getAttribute("data-id"),r=[],o="error",s="finished",a="pending",i="pass",l="pending",u=document.querySelector(".scan-queue-bg-wrap"),c=document.querySelector(".scan-result-bg-wrap"),d=document.getElementById("scan-time"),m=document.getElementById("scan-percentage"),p=document.getElementById("scan-percentage-bar"),f=document.getElementById("total-hints"),y=document.getElementById("version"),h=function(e,t){return(0,ejsPartials[e])(t)},g=function(e,t){e.textContent=t},v=function(e){var t="#summary-"+e.name+" .rule-tile__hints span",n="#summary-"+e.name+" .rule-tile__passed",r=function(e){return e.filter((function(e){return e.status!==l}))}(e.hints).length,o=e.passed.length,s=document.querySelector(t),a=document.querySelector(n);g(s,r),g(a,o)},x=function(e){e.categories.forEach((function(e){if(e.hints){var t=function(e){return e.hints.every((function(e){return e.status===i}))}(e);t&&function(e){var t=document.getElementById(e.name),n=t.querySelector(".compiling__loader");if(!t.querySelector(".rule-result__message--passed")){n&&t.removeChild(n);var r=h("category-pass-message",{});t.insertAdjacentHTML("beforeend",r)}}(e),e.hintsToUpdate=function(e){if(e.hints)return e.hints.filter((function(e){return-1===r.indexOf(e.name)&&e.status!==l&&e.status!==i}))}(e),function(e){if(e.hintsToUpdate&&0!==e.hintsToUpdate.length){var t=document.getElementById(e.name),n=t.querySelector(".button-expand-all"),r=t.querySelector(".compiling__loader"),o="";if(e.hintsToUpdate.forEach((function(t){o+=h("scan-result-item",{hint:t,isScanner:e.isScanner,utils:window.utils})})),!n){var s=ejsPartials["scan-expand-all"]();t.querySelector(".rule-result--category").insertAdjacentHTML("beforeend",s)}r.insertAdjacentHTML("beforebegin",o)}}(e),v(e),function(e){e.hintsToUpdate&&e.hintsToUpdate.forEach((function(e){-1===r.indexOf(e.name)&&r.push(e.name)}))}(e),function(e){return e.hints.every((function(e){return e.status!==a}))}(e)&&function(e){var t=document.getElementById(e.name),n=t.querySelector(".compiling__loader");n&&t.removeChild(n)}(e)}}));for(var t=document.querySelectorAll("code"),n=0;n<t.length;n++)hljs.highlightBlock(t[n]);f.textContent=e.hintsCount,d.textContent=e.scanTime,y.textContent=e.version},b=function(e){return e&&1===e.length?"0"+e:e},A=function(){try{var e=d.textContent.trim().split(":"),t=parseInt(e[0],10),n=parseInt(e[1],10);++n>=60&&(t++,n=0),d.textContent=b(t.toString())+":"+b(n.toString())}catch(e){}},E=function(e){var t=e.categories.reduce((function(e,t){var n;return e.finished+=t.passed.length+(n=t.hints,n.filter((function(e){return e.status!==l}))).length,e.total+=t.passed.length+t.hints.length,e}),{finished:0,total:0}),n=t.finished/t.total*100;m.textContent=Math.round(n)+"%",p.style.width=n+"%",100===n&&p.classList.add("end-animation")},w=0,S=function(){!function(e){var t=new XMLHttpRequest,n=e.callback,r=e.url;t.open(e.method||"GET",r,!0),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){if(n)return e.dontTransform?n(null,t.responseText):n(null,JSON.parse(t.responseText))}else if(n)return n(t.status,t.responseText);return null},t.send(e.params)}({callback:function(e,n){if(e)return++w>=5?(clearInterval(t),void console.error(e)):setTimeout(S,5e3);w=0;var r=n.result,i=r.status===s,l=r.status===o,d=r.status===a;if(u.style.display="none",c.style.display="block",d)return setTimeout(S,5e3);r.showError&&function(e){if(!document.getElementById("scan-error")){var t=h("scan-error-message",{result:e}),n=document.getElementById("results-container");n.insertAdjacentHTML("beforebegin",t),n.style.display="none"}}(r),x(r),E(r),function(e){var t=ejsPartials["browser-icon"]({result:e}),n=/href="([^"]*)"/g.exec(t);n&&document.querySelector('link[rel="icon"]').setAttribute("href",n[1])}(r),t||(t=setInterval(A,1e3)),i||l?clearInterval(t):setTimeout(S,5e3)},url:"api/"+n})};window.history.pushState(null,null,n),function(){for(var e=document.querySelectorAll(".rule-result--details"),t=0;t<e.length;t++){var n=e[t].id;n&&r.push(n)}}(),"none"!==document.querySelector(".scan-queue-bg-wrap").style.display?setTimeout(S,6e4):S()}}();